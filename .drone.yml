---
pipeline:
  lint:
    image: quay.io/ansible/molecule
    commands:
      - 'molecule lint'
      - 'molecule syntax'

  test:
    image: quay.io/ansible/molecule
    commands:
      - 'molecule cleanup'
      - 'molecule --debug destroy'
      - 'molecule --debug converge'
      - 'molecule idempotence'
      - 'molecule verify'
      - 'molecule cleanup'
      - 'molecule destroy'
    privileged: True
  volumes:
  - name: docker
    path: /var/run/docker.sock

volumes:
- name: docker
  host:
    path: /var/run/docker.sock
